{% if style and elements %}
{% if style == 'table' %}
<!--viewstyle table-->
<table class="poppins-font primary-font table table-hover text-align-left">
    <thead align="center">
        <tr class="border-bottom5">
            {% for feature in gridelements %}
            {% if feature['type'] == nametable %}
            {% for b,n in feature.items() %}
            {% if b!='type' %}
            <th class=""> {{b.capitalize()}}</th>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endfor %}
            {% if nametable == 'lists' %}
            {% else %}
            <th class="">More Info</th>
            {% endif %}

        </tr>
    </thead>
    <tbody align="center">
        {% for element in elements %}
        <tr class="">
            {% for k,v in element.items() %}

            {% for feature in gridelements %}
            {% if feature['type'] == nametable %}
            {% for b,n in feature.items() %}
            {% if v == '' and b==k and b != 'type' %}
            <td class=""> - </td>
            {% elif v!= '' and b==k and b != 'type' %}
            <td class="">{{element[k]}}</td>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endfor %}
            {% endfor %}
            {% if nametable == 'lists' %}
            <td class="padding-left-5">
                <form action="/list?{{element['id']}}" method="get">
                    <input name="lists_id" type="hidden" value="{{element['id']}}">
                    <input name="lists_id" type="hidden" value="{{element['namelist']}}">
                    <button
                    class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto h-auto"
                    value="{{element['namelist']}}"" type="submit"
                    >Go</button>
                </form>
            </td>
            {% else %}

            <td class="padding-left-5"><button
                    class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto h-auto"
                    type="button" data-bs-toggle="collapse" data-bs-target="#showelementinfo{{element['id']}}"
                    aria-expanded="false" aria-controls="showelementinfo{{element['id']}}" type="submit"
                    value=""></button></td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% elif style == 'title' %}
{% for element in elements %}
<!--viewstyle title-->
<div class="mb-3 p-2">
    {% if nametable != 'lists'%}
    <button class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font" type="button"
        data-bs-toggle="collapse" data-bs-target="#showelementinfo{{element['id']}}" aria-expanded="false"
        aria-controls="showelementinfo{{element['id']}}" type="submit" value="">
        <div align="left" class="height-width25">
    {% else %}
    <form action="/list?{{element['id']}}" method="get">
        <input name="lists_id" type="hidden" value="{{element['id']}}">
        <button
            class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto h-auto"
            type="submit" value="{{element['namelist']}}">
    {% endif %}
              
                {% for k,v in element.items() %}
                    {% for feature in titleelements %}
                        {% for b,n in feature.items() %}
                            {% if feature['type'] == nametable %}
                                {% if b != 'type' %} 
                                    {% if b == 'name' or b=='title' or b == 'namelist' %}
                                    {% if v == '' and b==k %}
                                        <p>-</p>
                                        {% elif v != '' and b==k %}
                                        <p>{{element[b]}}</p>
                                        {% endif%}
                                    {% endif%}
                                {% endif%}
                            {% endif%}
                        {% endfor%}
                    {% endfor%}
                {% endfor%}
                {% for k,v in element.items() %}
                    {% for feature in titleelements %}
                        {% if feature['type'] == nametable %}
                            {% for b,n in feature.items() %}
                                {% if b != 'type' %} 
                                    {% if b != 'name' and b!='title' and b != 'namelist' %}
                                    {% if v == '' and b==k %}
                                    <p>-</p>
                                    {% elif v != '' and b==k %}
                                    <p>{{element[b]}}</p>
                                    {% endif%}
                                    {% endif%}
                                {% endif%}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                {% endfor %}
    {% if nametable != 'lists'%}
    </div>
    </button>
    {% else %}
    </button>
    </form> 
    {% endif %}
</div>
{% endfor %}

{% elif style == 'shopping list' %}
{% if nametable != 'lists'%}
<!--viewstyle shoppinglist-->
<div class="mb-3 p-2 poppins-font primary-font">
    Shopping List
</div>
{% for element in elements %}
<div class="mb-3 p-2 d-flex flex-row flex-wrap">
    <!-- checkbox-->
    <div><input type="checkbox"></div>
    <!--image-->
    {% if element['img_id'] != 0 %}
        {% for image in images%}
            {% if element['img_id'] == image['id'] %}
            <div>
                <img class="objective-fit-cover" src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
            </div>
            {% endif %}
        {% endfor %}
    {% else %}
        <div class="width-image-grid"><i class="objective-fit-cover bi bi-slash-circle"></i>No image for this element</div>
    {% endif %}
    <!-- name + note-->
    <div>
        <div class="mb-3 margin-left-8 text-align-left w-auto">
            <label class="abrilfatface-font">Name</label>
            {% if element['name'] == '' or element['name'] == 'null' %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            -
            </h3>
            {% else %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            {{element['name']}}
            </h3>
            {% endif %}
        </div>
        <div class="mb-3 margin-left-8 text-align-left w-auto">
            <label class="abrilfatface-font">Note</label>
            {% if element['note'] == '' or element['note'] == 'null' %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            -
            </h3>
            {% else %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            {{element['note']}}
            </h3>
            {% endif %}
        </div>
    </div>
    <!-- quantity + price -->
    <div>
        <div class="mb-3 margin-left-8 text-align-left w-auto d-flex flex-row">
            <div>
            <label class="abrilfatface-font">Qnty</label>
            {% if element['quantity'] == '' or element['quantity'] == 'null' %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            -
            </h3>
            {% else %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            {{element['quantity']}}
            </h3>
            {% endif %}
            </div>
            <div>
                <div><i class="bi bi-plus-square"></i></div>
                <div><i class="bi bi-dash-square"></i></div>
            </div>
        </div>
        <div class="mb-3 margin-left-8 text-align-left w-auto">
            <label class="abrilfatface-font">Price</label>
            {% if element['price'] == '' or element['price'] == 'null' %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            -
            </h3>
            {% else %}
            <h3 class="border form-control mx-auto bkground-color-box-white poppins-font primary-font">
            {{element['price']}}
            </h3>
            {% endif %}
        </div>
    </div>

</div>
{% endfor %}
{% endif %}


{% else %}
<!--viewstyle grid (image only)-->
{% for element in elements %}
<div class="mb-3 p-2">
    <button class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto" type="button"
        data-bs-toggle="collapse" data-bs-target="#showelementinfo{{element['id']}}" aria-expanded="false"
        aria-controls="showelementinfo{{element['id']}}" type="submit" value="">
        <div class="d-flex flex-wrap">
        {% if nametable != 'bills' %}
            {% if element['img_id'] != 0 %}
                {% for image in images%}
                    {% if element['img_id'] == image['id'] %}
                    <img class="objective-fit-cover" src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
                    {% endif %}
                {% endfor %}
            {% else %}
                   <div class="width-image-grid"><i class="objective-fit-cover bi bi-slash-circle"></i>No image for this element</div>
            {% endif %}
        {% endif %}

        {% if nametable == 'bills' %}
            {% if element['img_id'] != 0 %}
                {% for image in images%}
                    {% if element['img_id'] == image['id'] %}
                         <img class="objective-fit-cover" src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if element['img_paid_id'] != 0 %}
                {% for image in images%}
                    {% if element['img_paid_id'] == image['id'] %}
                    <img class="objective-fit-cover" src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if element['img_id'] == 0 and element['img_paid_id'] == 0 %}
                <div class="width-image-grid"><i class="objective-fit-cover bi bi-slash-circle"></i>No image for this element</div>
            {% endif %}
        {% endif %}
        </div>
    </button>
</div>
{% endfor %}
{% endif %}
{% endif %}
{% if apologymsg %}
<li class="p-2 style-li-notype width100">
    <div class="mb-3 width100">
        <p id="apologymsg" class="primary-font mx-auto width100" type="text" name="apologymsg"> {{apologymsg}} </p>
    </div>
</li>
{% endif %}