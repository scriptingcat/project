{% if style and elements %}
{% if style == 'table' %}
<!--viewstyle table-->
<table class="poppins-font primary-font table table-hover text-align-left">
    <thead align="center">
        <tr class="border-bottom5">
            {% for feature in gridelements %}
            {% if feature['type'] == nametable %}
            {% for b,n in feature.items() %}
            {% if b!='type' %}
            <th class=""> {{b.capitalize()}}</th>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endfor %}
            {% if nametable == 'lists' %}
            {% else %}
            <th class="">More Info</th>
            {% endif %}

        </tr>
    </thead>
    <tbody align="center">
        {% for element in elements %}
        <tr class="">
            {% for k,v in element.items() %}

            {% for feature in gridelements %}
            {% if feature['type'] == nametable %}
            {% for b,n in feature.items() %}
            {% if v == '' and b==k and b != 'type' %}
            <td class=""> - </td>
            {% elif v!= '' and b==k and b != 'type' %}
            <td class="">{{element[k]}}</td>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endfor %}
            {% endfor %}
            {% if nametable == 'lists' %}
            <td class="padding-left-5">
                <form action="/list?{{element['id']}}" method="get">
                    <input name="lists_id" type="hidden" value="{{element['id']}}">
                    <input name="namelist" type="hidden" value="{{element['namelist']}}">
                    <button
                    class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto h-auto"
                    value="{{element['namelist']}}" type="submit"
                    >Go</button>
                </form>
            </td>
            {% else %}

            <td class="padding-left-5"><button
                    class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto h-auto"
                    type="button" data-bs-toggle="collapse" data-bs-target="#showelementinfo{{loop.index0}}"
                    aria-expanded="false" aria-controls="showelementinfo{{loop.index0}}" type="submit"
                    value=""></button></td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% elif style == 'title' %}
{% for element in elements %}
<!--viewstyle title-->
<div class="mb-3 p-2">
    {% if nametable != 'lists'%}
    <button class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font" type="button"
        data-bs-toggle="collapse" data-bs-target="#showelementinfo{{loop.index0}}" aria-expanded="false"
        aria-controls="showelementinfo{{loop.index0}}" type="submit" value="">
        <div align="left" class="height-width25">
    {% else %}
    <form action="/list?{{element['id']}}" method="get">
        <input name="lists_id" type="hidden" value="{{element['id']}}">
        <button
            class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto h-auto"
            type="submit" value="{{element['namelist']}}">
    {% endif %}
              
                {% for k,v in element.items() %}
                    {% for feature in titleelements %}
                        {% for b,n in feature.items() %}
                            {% if feature['type'] == nametable %}
                                {% if b != 'type' %} 
                                    {% if b == 'name' or b=='title' or b == 'namelist' %}
                                    {% if v == '' and b==k %}
                                        <p>-</p>
                                        {% elif v != '' and b==k %}
                                        <p>{{element[b]}}</p>
                                        {% endif%}
                                    {% endif%}
                                {% endif%}
                            {% endif%}
                        {% endfor%}
                    {% endfor%}
                {% endfor%}
                {% for k,v in element.items() %}
                    {% for feature in titleelements %}
                        {% if feature['type'] == nametable %}
                            {% for b,n in feature.items() %}
                                {% if b != 'type' %} 
                                    {% if b != 'name' and b!='title' and b != 'namelist' %}
                                    {% if v == '' and b==k %}
                                    <p>-</p>
                                    {% elif v != '' and b==k %}
                                    <p>{{element[b]}}</p>
                                    {% endif%}
                                    {% endif%}
                                {% endif%}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                {% endfor %}
    {% if nametable != 'lists'%}
    </div>
    </button>
    {% else %}
    </button>
    </form> 
    {% endif %}
</div>
{% endfor %}

{% elif style == 'shopping list' %}
{% if nametable != 'lists'%}
<!--viewstyle shoppinglist-->
<div class=" p-2 poppins-font primary-font primary-colors border width60">
    This is your shopping list: {{namelist}}
</div>
{% for element in elements %}
<div class="border d-flex flex-row flex-wrap mb-2 mt-2 py-2 width60 position-relative">
    <!-- actions buttons-->
    <div class="w-auto margin-left-3 align-self-center z-i-30">
        
        <div class="w-auto ">
            <form action="/list?lists_id={{lists_id}}" method="post">
                <input name="actiononelement" type="hidden" value="deleteelement">
                <input name="iddeleteelement" type="hidden" value="{{element['id']}}">
                <button class="noborder bkground-color-box-none" type="submit"><i class="primary-font-delete-hover bkground-color-box-none font-size1 bi bi-trash3"></i></button>
            </form>
        </div>
        <div class="w-auto">
            <button class="noborder bkground-color-box-none" onclick="displaynone('overcolor{{loop.index0}}');" type="button">
                <i class="primary-font-hover font-size1 bi bi-bag-check-fill"></i>
            </button>
        </div>
    </div>
    <!--image-->
    <div class="border objective-fit-cover-sl margin-left-3 align-self-center">
        {% if element['img_id'] != 0 %}
            {% for image in images%}
                {% if element['img_id'] == image['id'] %}
                <img class="objective-fit-cover-sl " src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
                {% endif %}
            {% endfor %}
        {% else %}
        <i class="objective-fit-cover-sl bi bi-slash-circle"></i>No image for this element
        {% endif %}
    </div>
    <!-- name + quantity + note + price-->
    <div class="width65">
        <!-- name + quantity-->
        <div align="left" class="d-flex w-auto align-self-stretch">
            <!--name-->
            <div class="w-auto margin-left-8">
                <div class="w-auto"><label class="abrilfatface-font">Name</label></div>
                <div class="w-auto">
                    {% if element['name'] == '' or element['name'] == 'null' %}
                        <h3 class="w-auto border form-control mx-auto bkground-color-box-white poppins-font primary-font">-</h3>
                    {% else %}
                        <h3 class="w-auto border form-control mx-auto bkground-color-box-white poppins-font primary-font">{{element['name']}}</h3>
                    {% endif %}
                </div>
            </div>
            <!--quantity-->
            <div class="w-auto margin-left-8">
                <div class="w-auto">
                    <label class="abrilfatface-font block">Qnty</label>
                </div>
                <div class="d-flex flex-row w-auto">
                    <div class="w-auto">
                        <input id="actiononelement{{loop.index0}}" name="actiononelement" type="hidden" value="updateqnty">
                        <h3 id="quantity{{loop.index0}}" class="w-auto border form-control bkground-color-box-white poppins-font primary-font margin0" > 
                        {%if element['quantity'] == '' or element['quantity'] == 'null' %}
                        -
                        {% else %}
                        {{element['quantity']}}
                        {% endif %}
                        </h3>
                        
                    </div>
                    <div class="w-auto fontsize85pc margin-left-8 align-self-top ">
                        <div class="w-auto position-relativei top--95">
                            <input id="lists_id{{loop.index0}}" type="hidden" value="{{lists_id}}">
                            <input id="id{{loop.index0}}" type="hidden" value="{{element['id']}}">
                            <button id="increase{{loop.index0}}" class="noborder bkground-color-box-none" onclick="increaseqnty('quantity{{loop.index0}}'); updatetable('quantity{{loop.index0}}','lists_id{{loop.index0}}', 'id{{loop.index0}}', 'add' );" " type="button">
                                <i class="primary-font-hover  bi bi-plus-square"></i>
                            </button>

                            <button id="decrease{{loop.index0}}" class="noborder bkground-color-box-none " onclick="decreaseqnty('quantity{{loop.index0}}'); updatetable('quantity{{loop.index0}}','lists_id{{loop.index0}}', 'id{{loop.index0}}', 'remove' );" type="button">
                                <i class="primary-font-hover  bi bi-dash-square"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- note + price -->
        <div align="left" class="d-flex w-auto">
            <!--note-->
            <div class="w-auto margin-left-8">
                <div class="w-auto">
                    <label class="abrilfatface-font block">Note</label>
                </div>
                <div class="w-auto">
                        <h3 class="w-auto border form-control bkground-color-box-white poppins-font primary-font margin0">
                        {% if element['note'] == '' or element['note'] == 'null' %}
                            -
                        {% else %}
                        {{element['note']}}
                        {% endif %}
                        </h3>
                </div>
            </div>
            <!--price-->
            <div class="w-auto margin-left-8">
                <div class="w-auto">
                    <label class="abrilfatface-font block">Price</label>
                </div>
                <div class="w-auto">
                    <h3 class="w-auto border form-control bkground-color-box-white poppins-font primary-font margin0">
                        {% if element['price'] == '' or element['price'] == 'null' %}
                            -
                        {% else %}
                        {{element['price']}}
                        {% endif %}
                    </h3>
                </div>
            </div>
        </div>
    </div>
    <!--overcolor-->
    <div id="overcolor{{loop.index0}}" class="position-absolute width100 height100 bkground-color-box-grey top--05 display-none">

    </div>

</div>
{% endfor %}
<script>
    
</script>
{% endif %}


{% else %}
{% if nametable != 'lists'%}
<!--viewstyle grid (image only)-->
{% for element in elements %}
<div class="mb-3 p-2">
    <button class="border bkground-color-box btn btnfocus btn-primary poppins-font primary-font w-auto" type="button"
        data-bs-toggle="collapse" data-bs-target="#showelementinfo{{loop.index0}}" aria-expanded="false"
        aria-controls="showelementinfo{{loop.index0}}" type="submit" value="">
        <div class="d-flex flex-wrap">
        {% if nametable != 'bills' %}
            {% if element['img_id'] != 0 %}
                {% for image in images%}
                    {% if element['img_id'] == image['id'] %}
                    <img class="objective-fit-cover" src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
                    {% endif %}
                {% endfor %}
            {% else %}
                   <div class="width-image-grid"><i class="objective-fit-cover bi bi-slash-circle"></i>No image for this element</div>
            {% endif %}
        {% endif %}

        {% if nametable == 'bills' %}
            {% if element['img_id'] != 0 %}
                {% for image in images%}
                    {% if element['img_id'] == image['id'] %}
                         <img class="objective-fit-cover" src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if element['img_paid_id'] != 0 %}
                {% for image in images%}
                    {% if element['img_paid_id'] == image['id'] %}
                    <img class="objective-fit-cover" src="data:{{image['mimetype']}};base64,{{image['imagedata']}}" alt="">
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if element['img_id'] == 0 and element['img_paid_id'] == 0 %}
                <div class="width-image-grid"><i class="objective-fit-cover bi bi-slash-circle"></i>No image for this element</div>
            {% endif %}
        {% endif %}
        </div>
    </button>
</div>
{% endfor %}
{% endif %}
{% endif %}
{% endif %}
{% if apologymsg %}
<li class="p-2 style-li-notype width100">
    <div class="mb-3 width100">
        <p id="apologymsg" class="primary-font mx-auto width100" type="text" name="apologymsg"> {{apologymsg}} </p>
    </div>
</li>
{% endif %}
<script>
    
</script>